/*! Icon Picker 1.2.1 MIT | https://github.com/AppoloDev/icon-picker */ !function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.IconPicker=t():e.IconPicker=t()}(self,function(){return(()=>{"use strict";var e={d(t,i){for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};function i(e,t,i,s){for(let n of(Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]),t))for(let a of i)n[e](a,s);return[].slice.call(arguments,1)}e.d(t,{default:()=>d});let s=i.bind(null,"addEventListener"),n=i.bind(null,"removeEventListener");function a(e){if(window.DOMParser)return new DOMParser().parseFromString(e,"text/html").body.firstElementChild;let t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}function l(e){return e&&"object"==typeof e&&!Array.isArray(e)}function r(e,t){return Object.keys(e).find(i=>e[i]===t)}let o=e=>{var t;let i,s,{theme:n,i18n:l,closeOnSelect:r}=e,o=(t=`
<div class="icon-picker-modal" tabindex="-1" data-theme="${n}" data-element="modal" aria-modal="true" aria-labelledby="Icon picker modal" role="dialog">
<div class="icon-picker-modal__dialog">
	<div class="icon-picker-modal__header" data-element="header">
		${"string"==typeof l["text:title"]&&""!==l["text:title"]?`<h3>${l["text:title"]}</h3>`:""}
		
		<button class="icon-picker-modal--close" aria-label="Close" data-interaction="close">
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke-width="1.5">
			  <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M6.758 17.243 12.001 12m5.243-5.243L12 12m0 0L6.758 6.757M12.001 12l5.243 5.243"/>
			</svg>
		</button>
	</div>
	
	<input placeholder="${l["input:placeholder"]}" class="icon-picker-modal__search" aria-label="${l["input:placeholder"]}" data-interaction="search">
	
	<div class="icon-picker-modal__content" data-element="content"></div>

	${r?"":`
		<div class="icon-picker-modal__footer" data-element="footer">
			<button type="button" class="picker-save" data-interaction="save">${l["btn:save"]}</button>
		</div>`}
</div>
</div>
`,i=(e,t)=>{let i=e.getAttribute(t);return e.removeAttribute(t),i},(s=(e,t={})=>{let n=i(e,"data-element");for(let a of(n&&(t[n]=e),Array.from(e.children))){let l=i(a,"data-interaction");l&&l&&(t[l]=a),s(a,t)}return t})(a(t)));return n.includes("bootstrap")&&(o.save?.classList.add("btn","btn-primary"),o.search.classList.add("form-control")),o},c="https://raw.githubusercontent.com/iconify/collections-json/master/json/",h={"FontAwesome Brands 6":{key:"fa6-brands",prefix:"fab fa-",url:`${c}fa6-brands.json`},"FontAwesome Solid 6":{key:"fa6-solid",prefix:"fas fa-",url:`${c}fa6-solid.json`},"FontAwesome Regular 6":{key:"fa6-regular",prefix:"far fa-",url:`${c}fa6-regular.json`},"Line Awesome":{key:"la",prefix:"la la-",url:`${c}la.json`}};class d{static DEFAULT_OPTIONS={theme:"default",closeOnSelect:!0,defaultValue:null,iconSource:[],i18n:{"input:placeholder":"Search icon…","text:title":"Select icon","text:empty":"No results found…","btn:save":"Save"}};_eventListener={select:[],save:[],show:[],clear:[],hide:[]};constructor(e,t={}){this.options=function e(t,i){let s=Object.assign({},t);return l(t)&&l(i)&&Object.keys(i).forEach(n=>{l(i[n])&&n in t?s[n]=e(t[n],i[n]):Object.assign(s,{[n]:i[n]})}),s}(d.DEFAULT_OPTIONS,t),this.element=e,this._preBuild(),this.element&&this.options.iconSource.length>0?(this._binEvents(),this._renderdIcons(),this._createModal()):this._catchError("iconSourceMissing")}_preBuild(){var e;this.element=(e=this.element)instanceof HTMLElement?e:"string"==typeof e?document.querySelector(e):null,this.root=o(this.options),!Array.isArray(this.options.iconSource)&&this.options.iconSource.length>0&&(this.options.iconSource=[this.options.iconSource])}_binEvents(){var e,t,i;let{options:n,root:l,element:r}=this,o=[];this._eventBindings=[s(r,"click",()=>this.show()),s(l.close,"click",()=>this.hide()),s(l.modal,"click",e=>{e.target===l.modal&&this.hide()}),s(l.search,"keyup",(e=e=>{let t=this.availableIcons.filter(t=>t.value.includes(e.target.value.toLowerCase()));o.length||(o=document.querySelectorAll(".icon-element")),o.forEach(e=>{e.hidden=!0,t.forEach(t=>{e.classList.contains(t.value)&&(e.hidden=!1)})});let i=l.content.querySelector(".is-empty");t.length>0?i&&i.remove():i||l.content.appendChild(a(`<div class="is-empty">${n.i18n["text:empty"]}</div>`))},t=250,function(){var s=arguments,n=this;clearTimeout(i),i=setTimeout(function(){e.apply(n,s)},t)})),],n.closeOnSelect||this._eventBindings.push(s(l.save,"click",()=>this._onSave()))}hide(){return!!this.isOpen()&&(this.root.modal.classList.remove("is-visible"),this._emit("hide"),this)}show(){return!this.isOpen()&&(this.root.modal.classList.add("is-visible"),this._emit("show"),this)}clear(){this.initialized&&this.currentlySelectName&&(this.currentlySelectName=null,this._emit("clear"))}isOpen(){return this.root.modal.classList.contains("is-visible")}destroy(e=!0){this.initialized=!1,this._eventBindings.forEach(e=>n(...e)),e&&Object.keys(this).forEach(e=>delete this[e])}_emit(e,...t){this._eventListener[e].forEach(e=>e(...t,this))}on(e,t){return void 0!==this._eventListener[e]&&(this._eventListener[e].push(t),this)}off(e,t){let i=this._eventListener[e]||[],s=i.indexOf(t);return~s&&i.splice(s,1),this}_createModal(){document.body.appendChild(this.root.modal),this.initialized=!0}_onSave(){this._setValueInput(),this.hide(),this._emit("save",this.emitValues)}async _renderdIcons(){let{root:e,options:t}=this,i=null,s=null;if(this.availableIcons=[],e.content.innerHTML="",(await this._getIcons()).forEach(n=>{let a=n.iconFormat?n.iconFormat:"svg";for(let[l,o]of Object.entries(n.icons)){let c=document.createElement("button"),h;if(c.title=l,c.className=`icon-element ${l}`,c.dataset.value=n.prefix+l,n.chars&&(c.dataset.unicode=r(n.chars,l)),"i"!==a&&o.body){if("markup"===a){let d=document.createElement("template");d.innerHTML=o.body,h=d.content}else(h=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("height","24"),h.setAttribute("width","24"),h.setAttribute("viewBox",`0 0 ${o.width?o.width:n.width} ${o.height?o.height:n.height}`),h.innerHTML=o.body}else(h=document.createElement("i")).setAttribute("class",c.dataset.value);c.append(h),e.content.appendChild(c),this.availableIcons.push({value:l,body:h.outerHTML}),c.addEventListener("click",e=>{this.currentlySelectName!==e.currentTarget.firstChild.className&&(e.currentTarget.classList.add("is-selected"),s=e.currentTarget,this.currentlySelectName=s.dataset.value,this.SVGString=h.outerHTML,this.emitValues={name:l,value:this.currentlySelectName,svg:this.SVGString},n.chars&&(this.emitValues.unicode=h.dataset.unicode),this._emit("select",this.emitValues)),i&&i.classList.remove("is-selected"),t.closeOnSelect&&this._onSave(),i=s})}}),t.defaultValue||this.element.value){let n=document.querySelector(`[data-value="${t.defaultValue?t.defaultValue:this.element.value}"]`)?document.querySelector(`[data-value="${t.defaultValue?t.defaultValue:this.element.value}"]`):document.querySelector(`.${t.defaultValue?t.defaultValue:this.element.value}`),a=n?.dataset.value??"";n?.classList.add("is-selected"),i=n,this.currentlySelectName=a,this.element.value||this._setValueInput()}}async _getIcons(){var e;let{options:t}=this,i=[],s,n=(e=t.iconSource,s=Object.create({}),console.log(e),Array.isArray(e)&&e.forEach(e=>{var t;(t=e,h.hasOwnProperty(t))?s[h[e].key]=h[e]:e.key&&(s[e.key]=e)}),s);for(let a of Object.values(n))i.push(a.url);return await Promise.all(i.map(e=>fetch(e).then(e=>e.json()))).then(e=>(console.log("iconLibrary",e),console.log(n),e.forEach(e=>{n.hasOwnProperty(e.prefix)&&(e.prefix=n[e.prefix].prefix)}),e))}_catchError(e){if("iconSourceMissing"===e)throw Error("No icon source was found.")}_setValueInput(e=this.currentlySelectName){let{element:t}=this;t instanceof HTMLInputElement&&this.currentlySelectName&&(t.value=e)}}return t.default})()});
